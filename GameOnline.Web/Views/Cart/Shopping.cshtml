@using GameOnline.Core.ExtenstionMethods
@using GameOnline.Core.ViewModels.CartViewmodel.Client
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model GetCartForShoppingViewmodel
@{
    int sumOrder = 0;
    int score = 0;
}
<div class="container">
    <div class="main-shopping">
        <div class="content-shopping">
            <div class="col-lg-9 col-md-9 col-xs-12 pull-right">
                <div class="shipment-page-container">
                    <div class="headline-checkout-shopping">
                        <span>انتخاب آدرس تحویل سفارش</span>
                    </div>
                    <div id="address-section">
                        <div class="checkout-contact">
                            <div class="checkout-contact-content">
                                <ul class="checkout-contact-items">
                                    <li class="checkout-contact-item">
                                        گیرنده:
                                        <span class="full-name">@Model.UserName</span>
                                        <a href="#" class="edit-address-btn" data-toggle="modal"
                                           data-target="#modalAddress">
                                            اصلاح این
                                            آدرس
                                        </a>
                                        <a href="#" class="checkout-contact-location" data-toggle="modal"
                                           data-target="#modalAddress">
                                            تغییر آدرس
                                            ارسال
                                        </a>
                                    </li>
                                    <li class="checkout-contact-item">
                                        <div class="checkout-contact-item-mobile">
                                            شماره تماس:
                                            <span class="mobile-phone">@Model.Phone</span>
                                        </div>
                                        <div class="checkout-contact-item-message">
                                            کد پستی:
                                            <span class="post-code">@Model.PostalCode</span>
                                            <br>
                                        </div>
                                        <span class="address-part">@Model.ProvinceName - @Model.CityName - @Model.FullAddress</span>
                                    </li>
                                </ul>
                                <div class="checkout-contact-badge">
                                    <i class="fa fa-check"></i>
                                </div>
                            </div>

                        </div>
                    </div>
                    <form action="#" id="shipping-data-form">
                        <div class="normal-delivery">
                            <div class="checkout-pack">
                                <div class="checkout-pack-header">
                                    <span class="checkout-time-table-shipping-lead-time">
                                        آماده ارسال
                                    </span>
                                </div>
                                <div class="checkout-time-table-shipping-type">
                                    <i class="fa fa-truck"></i>ارسال عادی
                                </div>
                                <div class="checkout-pack-row row">
                                    @foreach (var item in Model.GetCartDetails)
                                    {
                                        <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-3">
                                            <div class="product-box-container">
                                                <div class="product-box-compact">
                                                    <a href="/Detail/@item.ProductId">
                                                        <img src="@PathTools.PathProductImageClient@item.ProductImg"
                                                             alt="@item.ProductFaTitle" class="img-fluid">
                                                    </a>
                                                    <div class="product-box-title text-center mt-2">
                                                        @item.ProductFaTitle
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        sumOrder += item.Price * item.CartCount;
                                        score += item.Score * item.CartCount;
                                    }
                                </div>
                                <div class="shipment-submit-type">
                                    <div class="checkout-time-table">
                                        <div class="additional-options-action-bar">
                                            <div class="additional-options-checkbox-container">
                                                <label class="checkout-additional-options-checkbox-image"></label>
                                            </div>
                                            <div class="checkout-additional-options-action-container">
                                                <div class="action-title">زمان تقریبی تحویل از @Model.GetCartDetails.FirstOrDefault().LastModifiedDate?.AddDays(3).ToPersianDate("dd ms") تا @Model.GetCartDetails.FirstOrDefault().LastModifiedDate?.AddDays(7).ToPersianDate("dd ms")</div>
                                                <ul class="action-description">
                                                    <li>پست پیشتاز با ظرفیت اختصاصی برای دیجی استور</li>
                                                    <li class="package-shipping-cost">
                                                        هزینه ارسال : رایگان
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="headline-checkout-shopping">
                    <span>صدور فاکتور</span>
                </div>
                <div class="checkout-invoice">
                    <div class="checkout-invoice-headline">
                        <div class="form-auth-row">
                            <label class="ui-checkbox">
                                <input type="checkbox" value="1" name="login" id="remember">
                                <span class="ui-checkbox-check"></span>
                            </label>
                            <label for="remember" class="remember-me">درخواست ارسال فاکتور خرید</label>
                        </div>
                    </div>
                </div>

                <div class="checkout-to-shipping-sticky">
                    <a href="#" class="selenium-next-step-shipping">ادامه فرآیند خرید</a>
                    <div class="checkout-to-shipping-price-report">
                        <p>مبلغ قابل پرداخت</p>
                        <div class="cart-item-product-price">
                            @sumOrder.ToString("N0")
                            <span>تومان</span>
                        </div>
                    </div>
                </div>

                <div class="checkout-actions">
                    <a href="cart.html" class="btn-link-spoiler">
                        « بازگشت به سبد خرید
                    </a>
                    <a href="shopping-payment.html" class="save-shipping-data">
                        تایید و ادامه ثبت سفارش »
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-md-3 col-xs-12 pull-left">
                <div class="page-aside" style="margin-top: 95px;">
                    <div class="checkout-summary">
                        <ul class="checkout-summary-summary">
                            <li><span>مبلغ کل (@Model.GetCartDetails.Count کالا)</span><span>@sumOrder.ToString("N0") تومان</span></li>
                            <li><span>جمع</span><span>@sumOrder.ToString("N0") تومان</span></li>
                            <li><span style="color: #424750; font-size:14px;">هزینه ارسال</span><span></span></li>
                            <li><span><i class="fa fa-truck"></i>ارسال عادی</span><span>رایگان</span></li>
                            <li><span>مبلغ قابل پرداخت</span><span>@sumOrder.ToString("N0") تومان</span></li>
                            <li class="checkout-digiclub-container">
                                <span class="checkout-digiclub-row">
                                    <img src="assets/images/digiclub.png" alt="digiclub">
                                    <span class="checkout-digiclub-points">امتیاز دیجی‌کلاب</span>
                                </span>
                                <span class="checkout-digiclub-row">@score <span class="checkout-bill-currency">امتیاز</span></span>
                            </li>
                        </ul>
                    </div>
                    <div class="checkout-summary-content">
                        <p>کالاهای موجود در سبد شما ثبت و رزرو نشده‌اند، برای ثبت سفارش مراحل بعدی را تکمیل کنید.</p>
                    </div>
                </div>
            </div>

            <footer class="footer-light">
                <div class="container">
                    <div class="footer-checkout-col">
                        <div class="footer-checkout-col-phone">
                            <span class="mdi mdi-phone"></span>شماره تماس :
                            <a href="#">
                                ۶۱۹۳۰۰۰۰
                                - ۰۲۱
                            </a>
                        </div>
                    </div>

                    <div class="footer-checkout-col">
                        <div class="footer-checkout-col-phone">
                            <span class="mdi mdi-email-outline"></span>شماره تماس :
                            <a href="#">info@digistore.com</a>
                        </div>
                    </div>

                    <p class="title-footer">استفاده از کارت هدیه یا کد تخفیف، درصفحه ی پرداخت امکان پذیر است.</p>

                    <p class="copy-right-footer-light">Copyright © 2006 - 2019 DigiStore.com</p>
                </div>
            </footer>
        </div>
    </div>
</div>
<!-- modal -->
<div class="modal fade" id="modalAddress" tabindex="-1" aria-labelledby="modalAddress" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalAddress">ویرایش آدرس</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="middle-container">
                    <form action="#" class="form-checkout">
                        <div class="form-checkout-headline">ویرایش آدرس</div>
                        <div class="form-checkout-row">
                            <label for="name">
                                نام و نام خانوادگی تحویل گیرنده <span class="required-star"
                                                                      style="color:red;">*</span>
                            </label>
                            <input type="text" id="name" class="input-name-checkout"
                                   placeholder="نام تحویل گیرنده را وارد نمایید">
                            <label for="phone-number">
                                شماره موبایل <span class="required-star"
                                                   style="color:red;">*</span>
                            </label>
                            <input type="text" id="phone-number" class="input-name-checkout"
                                   placeholder="09xxxxxxxxx" style="text-align:left;">
                            <label for="fixed-number">
                                شماره تلفن ثابت <span class="required-star"
                                                      style="color:red;">*</span>
                            </label>
                            <input type="text" id="fixed-number" class="input-name-checkout" placeholder="021xxxxxx"
                                   style="text-align:left;">

                            <div class="form-checkout-valid-row">
                                <label for="province">
                                    استان <span class="required-star"
                                                style="color:red;"></span>
                                </label>
                                <select name="province" id="province">
                                    <option value="date-desc" selected="selected">
                                        شهر مورد نظر خود را انتخاب
                                        کنید
                                    </option>
                                    <option value="date-asc">تهران</option>
                                    <option value="rate">مشهد</option>
                                    <option value="views">اصفهان</option>
                                    <option value="comments">شیراز</option>
                                </select>
                            </div>

                            <div class="form-checkout-valid-row">
                                <label for="city">
                                    شهر
                                    <span class="required-star" style="color:red;">*</span>
                                </label>
                                <select name="city" id="city">
                                    <option value="date-desc" selected="selected">
                                        شهر مورد نظر خود را انتخاب
                                        کنید
                                    </option>
                                    <option value="date-asc">آشخانه</option>
                                    <option value="rate">شیروان</option>
                                    <option value="views">اسفراین</option>
                                    <option value="comments">جاجرم</option>
                                </select>
                            </div>

                            <label for="address">
                                آدرس
                                <span class="required-star" style="color:red;">*</span>
                            </label>
                            <input type="text" id="address" class="input-name-checkout"
                                   placeholder="آدرس خود را وارد نمایید" style="height:80px;">
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">بازگشت</button>
                <button type="button" class="btn btn-primary mr-2">ثبت آدرس</button>
            </div>
        </div>
    </div>
</div>