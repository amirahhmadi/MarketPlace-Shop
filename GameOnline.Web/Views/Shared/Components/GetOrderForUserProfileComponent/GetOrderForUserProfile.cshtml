@using GameOnline.Core.ExtenstionMethods
@model IEnumerable<GameOnline.Core.ViewModels.UserViewmodel.Client.GetOrdersViewmodel>
@{
    int orderCount = 1;
}
<div class="headline-profile order-end" style="margin-top:0;">
    <span>آخرین سفارش ها</span>
</div>
<div class="profile-stats profile-table">
    <div class="table-orders">
        <table class="table">
            <thead class="thead-light">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">شماره سفارش</th>
                    <th scope="col">تاریخ ثبت سفارش</th>
                    <th scope="col">مبلغ کل</th>
                    <th scope="col">عملیات پرداخت</th>
                    <th scope="col">جزئیات</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.GroupBy(x => x.CartId))
                {
                    @if (item.FirstOrDefault().OrderType != OrderType.Product_selection)
                    {
                        <tr>
                            <td>@orderCount</td>
                            <td class="order-code">DKC-57262900</td>
                            <td>@item.FirstOrDefault().CreationDate.ToPersianDate("dd ms Y")</td>
                            <td>@item.FirstOrDefault().Price.ToString("N0") تومان</td>
                            <td class="text-success">
                                @switch (item.FirstOrDefault().OrderType)
                                {
                                    case OrderType.Product_selection:
                                        <span>"انتخاب کالا - سفارش باز"</span>
                                        break;

                                    case OrderType.Canceled:
                                        <span>"کنسل شده"</span>
                                        break;

                                    case OrderType.Paid:
                                        <span>"پرداخت شده"</span>
                                        break;
                                    case OrderType.review_queue:
                                        <span>"در صف بررسی"</span>
                                        break;
                                    case OrderType.order_confirmation:
                                        <span>"تایید سفارش"</span>
                                        break;
                                    case OrderType.Order_preparation:
                                        <span>"آماده‌سازی سفارش"</span>
                                        break;
                                    case OrderType.Leaving_the_processing_center:
                                        <span>"خروج از مرکز پردازش"</span>
                                        break;
                                    case OrderType.Delivery_to_the_post_office:
                                        <span>"تحویل به اداره پست"</span>
                                        break;
                                    case OrderType.Postal_exchange_center:
                                        <span>"دریافت در مرکز مبادلات پست"</span>
                                        break;
                                    case OrderType.Delivery_to_the_customer:
                                        <span>"تحویل مرسوله به مشتری"</span>
                                        break;

                                }
                            </td>
                            <td><a href="/OrderDetail/@item.FirstOrDefault().CartId"><i class="fa fa-angle-left"></i></a></td>
                        </tr>
                    }
                }
            </tbody>
        </table>

        <a href="#" class="table-orders-show-more">مشاهده لیست سفارش‌ها</a>
    </div>
</div>


<div class="page-profile headline-profile-favorites">
    <div class="page-navigation">
        <div class="page-navigation-title">سفارش‌های من</div>
        <a href="#" class="page-navigation-btn-back">بازگشت <i class="fa fa-angle-left"></i></a>
    </div>
    <div class="profile-orders">
        <div class="collapse">
            <div class="profile-orders-item">
                <div class="profile-orders-header">
                    <a href="profile-order-2.html" class="profile-orders-header-details">
                        <div class="profile-orders-header-summary">
                            <div class="profile-orders-header-row">
                                <span class="profile-orders-header-id">DKC-79356178</span>
                                <span class="profile-orders-header-state">پرداخت شده</span>
                            </div>
                        </div>
                    </a>
                    <hr class="ui-separator">
                    <div class="profile-orders-header-data">
                        <div class="profile-info-row">
                            <div class="profile-info-label">تاریخ ثبت سفارش</div>
                            <div class="profile-info-value">۷ آذر ۱۳۹۸</div>
                        </div>
                        <div class="profile-info-row">
                            <div class="profile-info-label">مبلغ قابل پرداخت</div>
                            <div class="profile-info-value">0</div>
                        </div>
                        <div class="profile-info-row">
                            <div class="profile-info-label">مبلغ کل</div>
                            <div class="profile-info-value">430,000,0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>